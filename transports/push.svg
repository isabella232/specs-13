<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1150" height="735" contentScriptType="application/ecmascript" contentStyleType="text/css" style="width:1150px;height:735px" preserveAspectRatio="none" version="1.1" viewBox="0 0 1150 735" zoomAndPan="magnify"><defs><filter id="f1muspx1z6xbgn" width="300%" height="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4" dy="4" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text x="433.5" y="23.535" fill="#000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="285">Uport Push Notification Architecture v2</text><rect style="stroke:#6959db;stroke-width:1" width="427.5" height="689.945" x="579.5" y="34.488" fill="#EDECFF"/><text x="741.25" y="47.057" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="104">Uport Servicess</text><rect style="stroke:#edecff;stroke-width:2" width="474.5" height="105.242" x="13" y="133.977" fill="#FFF" filter="url(#f1muspx1z6xbgn)"/><rect style="stroke:#edecff;stroke-width:2" width="1126" height="75.932" x="13" y="253.219" fill="#FFF" filter="url(#f1muspx1z6xbgn)"/><rect style="stroke:#edecff;stroke-width:2" width="1126" height="277.795" x="13" y="343.15" fill="#FFF" filter="url(#f1muspx1z6xbgn)"/><line style="stroke:#878787;stroke-width:1;stroke-dasharray:5,5" x1="68" x2="68" y1="116.977" y2="637.945"/><line style="stroke:#878787;stroke-width:1;stroke-dasharray:5,5" x1="205" x2="205" y1="116.977" y2="637.945"/><line style="stroke:#878787;stroke-width:1;stroke-dasharray:5,5" x1="416.5" x2="416.5" y1="116.977" y2="637.945"/><line style="stroke:#878787;stroke-width:1;stroke-dasharray:5,5" x1="659.5" x2="659.5" y1="116.977" y2="637.945"/><line style="stroke:#878787;stroke-width:1;stroke-dasharray:5,5" x1="980" x2="980" y1="116.977" y2="637.945"/><line style="stroke:#878787;stroke-width:1;stroke-dasharray:5,5" x1="1076" x2="1076" y1="116.977" y2="637.945"/><text x="23" y="114.023" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="85">UportMobile</text><ellipse cx="68.5" cy="43.488" fill="#FFF" filter="url(#f1muspx1z6xbgn)" rx="8" ry="8" style="stroke:#6959db;stroke-width:2"/><path fill="#FFF" d="M68.5,51.4883 L68.5,78.4883 M55.5,59.4883 L81.5,59.4883 M68.5,78.4883 L55.5,93.4883 M68.5,78.4883 L81.5,93.4883" filter="url(#f1muspx1z6xbgn)" style="stroke:#6959db;stroke-width:2"/><text x="23" y="650.481" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="85">UportMobile</text><ellipse cx="68.5" cy="663.434" fill="#FFF" filter="url(#f1muspx1z6xbgn)" rx="8" ry="8" style="stroke:#6959db;stroke-width:2"/><path fill="#FFF" d="M68.5,671.4336 L68.5,698.4336 M55.5,679.4336 L81.5,679.4336 M68.5,698.4336 L55.5,713.4336 M68.5,698.4336 L81.5,713.4336" filter="url(#f1muspx1z6xbgn)" style="stroke:#6959db;stroke-width:2"/><rect style="stroke:#6959db;stroke-width:1.5" width="138" height="30.488" x="134" y="81.488" fill="#FFF" filter="url(#f1muspx1z6xbgn)" rx="5" ry="5"/><text x="141" y="102.023" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="124">Apple Push Server</text><rect style="stroke:#6959db;stroke-width:1.5" width="138" height="30.488" x="134" y="636.945" fill="#FFF" filter="url(#f1muspx1z6xbgn)" rx="5" ry="5"/><text x="141" y="657.481" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="124">Apple Push Server</text><rect style="stroke:#6959db;stroke-width:1.5" width="97" height="30.488" x="366.5" y="81.488" fill="#FFF" filter="url(#f1muspx1z6xbgn)" rx="5" ry="5"/><text x="373.5" y="102.023" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="83">AmazonSNS</text><rect style="stroke:#6959db;stroke-width:1.5" width="97" height="30.488" x="366.5" y="636.945" fill="#FFF" filter="url(#f1muspx1z6xbgn)" rx="5" ry="5"/><text x="373.5" y="657.481" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="83">AmazonSNS</text><rect style="stroke:#6959db;stroke-width:1.5" width="129" height="30.488" x="593.5" y="81.488" fill="#FFF" filter="url(#f1muspx1z6xbgn)" rx="5" ry="5"/><text x="600.5" y="102.023" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="115">UportPushServer</text><rect style="stroke:#6959db;stroke-width:1.5" width="129" height="30.488" x="593.5" y="636.945" fill="#FFF" filter="url(#f1muspx1z6xbgn)" rx="5" ry="5"/><text x="600.5" y="657.481" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="115">UportPushServer</text><text x="957" y="114.023" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="40">Inbox</text><path fill="#FEFECE" d="M962,64.4883 C962,54.4883 980,54.4883 980,54.4883 C980,54.4883 998,54.4883 998,64.4883 L998,90.4883 C998,100.4883 980,100.4883 980,100.4883 C980,100.4883 962,100.4883 962,90.4883 L962,64.4883" filter="url(#f1muspx1z6xbgn)" style="stroke:#000;stroke-width:1.5"/><path fill="none" d="M962,64.4883 C962,74.4883 980,74.4883 980,74.4883 C980,74.4883 998,74.4883 998,64.4883" style="stroke:#000;stroke-width:1.5"/><text x="957" y="650.481" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="40">Inbox</text><path fill="#FEFECE" d="M962,663.4336 C962,653.4336 980,653.4336 980,653.4336 C980,653.4336 998,653.4336 998,663.4336 L998,689.4336 C998,699.4336 980,699.4336 980,699.4336 C980,699.4336 962,699.4336 962,689.4336 L962,663.4336" filter="url(#f1muspx1z6xbgn)" style="stroke:#000;stroke-width:1.5"/><path fill="none" d="M962,663.4336 C962,673.4336 980,673.4336 980,673.4336 C980,673.4336 998,673.4336 998,663.4336" style="stroke:#000;stroke-width:1.5"/><rect style="stroke:#6959db;stroke-width:1.5" width="82" height="30.488" x="1033" y="81.488" fill="#FFF" filter="url(#f1muspx1z6xbgn)" rx="5" ry="5"/><text x="1040" y="102.023" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="68">ClientApp</text><rect style="stroke:#6959db;stroke-width:1.5" width="82" height="30.488" x="1033" y="636.945" fill="#FFF" filter="url(#f1muspx1z6xbgn)" rx="5" ry="5"/><text x="1040" y="657.481" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="68">ClientApp</text><rect style="stroke:#edecff;stroke-width:2" width="474.5" height="105.242" x="13" y="133.977" fill="none"/><polygon fill="#6959DB" points="13 133.977 189 133.977 189 140.977 179 150.977 13 150.977 13 133.977" style="stroke:#edecff;stroke-width:2"/><text x="28" y="147.545" fill="#FFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="131">Mobile Registration</text><polygon fill="#6959DB" points="79.5 168.287 69.5 172.287 79.5 176.287 75.5 172.287" style="stroke:#6959db;stroke-width:1"/><line style="stroke:#6959db;stroke-width:1" x1="73.5" x2="204" y1="172.287" y2="172.287"/><text x="85.5" y="167.856" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85">Device Token</text><polygon fill="#6959DB" points="405 197.598 415 201.598 405 205.598 409 201.598" style="stroke:#6959db;stroke-width:1"/><line style="stroke:#6959db;stroke-width:1" x1="68.5" x2="411" y1="201.598" y2="201.598"/><text x="75.5" y="197.166" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85">Device Token</text><polygon fill="#6959DB" points="79.5 226.908 69.5 230.908 79.5 234.908 75.5 230.908" style="stroke:#6959db;stroke-width:1"/><line style="stroke:#6959db;stroke-width:1" x1="73.5" x2="416" y1="230.908" y2="230.908"/><text x="85.5" y="226.477" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="87">Endpoint ARN</text><rect style="stroke:#edecff;stroke-width:2" width="1126" height="75.932" x="13" y="253.219" fill="none"/><polygon fill="#6959DB" points="13 253.219 223 253.219 223 260.219 213 270.219 13 270.219 13 253.219" style="stroke:#edecff;stroke-width:2"/><text x="28" y="266.787" fill="#FFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="165">App Request Permission</text><polygon fill="#6959DB" points="79.5 287.529 69.5 291.529 79.5 295.529 75.5 291.529" style="stroke:#6959db;stroke-width:1"/><line style="stroke:#6959db;stroke-width:1" x1="73.5" x2="1075" y1="291.529" y2="291.529"/><text x="85.5" y="287.098" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="223">Selective Disclosure Request Token</text><polygon fill="#6959DB" points="1064 316.84 1074 320.84 1064 324.84 1068 320.84" style="stroke:#6959db;stroke-width:1"/><line style="stroke:#6959db;stroke-width:1" x1="68.5" x2="1070" y1="320.84" y2="320.84"/><text x="75.5" y="316.408" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="243">Push Token (containing Endpoint ARN)</text><rect style="stroke:#edecff;stroke-width:2" width="1126" height="277.795" x="13" y="343.15" fill="none"/><polygon fill="#6959DB" points="13 343.15 150 343.15 150 350.15 140 360.15 13 360.15 13 343.15" style="stroke:#edecff;stroke-width:2"/><text x="28" y="356.719" fill="#FFF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="92">Send Request</text><polygon fill="#6959DB" points="671 377.461 661 381.461 671 385.461 667 381.461" style="stroke:#6959db;stroke-width:1"/><line style="stroke:#6959db;stroke-width:1" x1="665" x2="1075" y1="381.461" y2="381.461"/><text x="677" y="377.029" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="216">PushToken and Encrypted Request</text><polygon fill="#6959DB" points="968 406.772 978 410.772 968 414.772 972 410.772" style="stroke:#6959db;stroke-width:1"/><line style="stroke:#6959db;stroke-width:1" x1="660" x2="974" y1="410.772" y2="410.772"/><text x="667" y="406.34" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="296">Store Encrypted Request and return message id</text><line style="stroke:#6959db;stroke-width:1" x1="660" x2="702" y1="440.393" y2="440.393"/><line style="stroke:#6959db;stroke-width:1" x1="702" x2="702" y1="440.393" y2="453.393"/><line style="stroke:#6959db;stroke-width:1" x1="661" x2="702" y1="453.393" y2="453.393"/><polygon fill="#6959DB" points="671 449.393 661 453.393 671 457.393 667 453.393" style="stroke:#6959db;stroke-width:1"/><text x="667" y="435.65" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="246">Extract Endpoint ARN from Push Token</text><polygon fill="#6959DB" points="428 478.393 418 482.393 428 486.393 424 482.393" style="stroke:#6959db;stroke-width:1"/><line style="stroke:#6959db;stroke-width:1" x1="422" x2="659" y1="482.393" y2="482.393"/><text x="434" y="477.961" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="219">Push message id and EndpointARN</text><polygon fill="#6959DB" points="216 507.703 206 511.703 216 515.703 212 511.703" style="stroke:#6959db;stroke-width:1"/><line style="stroke:#6959db;stroke-width:1" x1="210" x2="416" y1="511.703" y2="511.703"/><text x="222" y="507.272" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="188">Message ID and Device Token</text><polygon fill="#6959DB" points="79.5 537.014 69.5 541.014 79.5 545.014 75.5 541.014" style="stroke:#6959db;stroke-width:1"/><line style="stroke:#6959db;stroke-width:1" x1="73.5" x2="204" y1="541.014" y2="541.014"/><text x="85.5" y="536.582" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72">Message ID</text><polygon fill="#6959DB" points="79.5 566.324 69.5 570.324 79.5 574.324 75.5 570.324" style="stroke:#6959db;stroke-width:1"/><polygon fill="#6959DB" points="968 566.324 978 570.324 968 574.324 972 570.324" style="stroke:#6959db;stroke-width:1"/><line style="stroke:#6959db;stroke-width:1" x1="73.5" x2="974" y1="570.324" y2="570.324"/><text x="85.5" y="565.893" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="92">Fetch Message</text><line style="stroke:#6959db;stroke-width:1" x1="68.5" x2="110.5" y1="599.945" y2="599.945"/><line style="stroke:#6959db;stroke-width:1" x1="110.5" x2="110.5" y1="599.945" y2="612.945"/><line style="stroke:#6959db;stroke-width:1" x1="69.5" x2="110.5" y1="612.945" y2="612.945"/><polygon fill="#6959DB" points="79.5 608.945 69.5 612.945 79.5 616.945 75.5 612.945" style="stroke:#6959db;stroke-width:1"/><text x="75.5" y="595.203" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="107">Decrypt Message</text></g></svg>